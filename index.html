<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feliz D√≠a del Novio ‚ù§</title>

  <!-- =========================
       A√ëADE AQU√ç TU FUENTE "Clavel"
       O SUBE UN ARCHIVO .woff/.ttf AL REPO Y CAMBIA LA RUTA ABAJO
       ========================= -->
  <!--
    Opci√≥n A (recomendada si subes el archivo clavel.woff2 al repo):
      @font-face { font-family: "ClavelCustom"; src: url('clavel.woff2') format('woff2'); font-weight: normal; font-style: normal; }
    Opci√≥n B (si existe en Google Fonts puedes cambiar por @import).
  -->
  <style>
    /* ======== Cambia esto si subiste tu font: ver nota arriba ======== */
    @font-face {
      font-family: "ClavelCustom";
      /* si subes la fuente al repo pon aqu√≠ el nombre del archivo, por ejemplo 'Clavel-Regular.woff2' */
      src: url('Clavel-Regular.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    :root{
      --text-color: #000000; /* color del texto indicado: negro */
      --accent: #ff4f81;
      --heart: "‚ù§";
    }

    /* ====== fondo: usa tu collage (coloca el nombre del archivo en BACKGROUND_IMAGE_VARIABLE dentro del script) ====== */
    html,body{height:100%; margin:0;}
    body{
      font-family: "ClavelCustom", Arial, sans-serif;
      color: var(--text-color);
      /* background se setear√° por JS para que puedas cambiar la ruta f√°cilmente */
      background-image: url(https://github.com/nattcjj/JUEGO_POLLO/blob/main/collage-background.jpg?raw=true);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display:flex;
      flex-direction:column;
      min-height:100vh;
      align-items:center;
      justify-content:flex-start;
    }

    /* ====== barra de opciones (botones) ====== */
    nav{
      margin-top:20px;
      display:flex;
      gap:12px;
      justify-content:center;
      align-items:center;
      flex-wrap:wrap;
      z-index:5;
    }
    nav .tab-btn{
      background: rgba(255,255,255,0.85);
      border: 2px solid rgba(0,0,0,0.06);
      padding:10px 16px;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
      display:inline-flex;
      gap:8px;
      align-items:center;
      color: var(--text-color);
      transition: transform .12s ease;
    }
    nav .tab-btn:hover{ transform: translateY(-3px); }

    /* ====== contenedor central (las secciones aparecen centradas verticalmente) ====== */
    .panel {
      width: 92%;
      max-width: 920px;
      min-height: calc(100vh - 140px);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 30px;
      box-sizing: border-box;
      text-align:center;
      z-index:2;
      /* fondo semitransparente para legibilidad */
      background: rgba(255,255,255,0.8);
      border-radius: 18px;
      margin: 24px 0 60px 0;
    }
    section{ display:none; width:100%; }

    section.active { display:block; }

    /* ====== estilos para las secciones particulares ====== */
    .center-column { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:16px; }

    /* Contador estilo "cuadrados" */
    .count-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; width:80%; max-width:700px; margin: 12px auto;}
    .count-box {
      background: white;
      color: var(--text-color);
      padding: 14px;
      border-radius:10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      font-weight:700;
      min-height:80px;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
    }
    .count-label { font-size:0.9rem; opacity:0.8; font-weight:600; }

    /* Collage / Rompecabezas (3x3 por defecto) */
    .puzzle-wrap { display:flex; flex-direction:column; align-items:center; gap:12px; }
    .puzzle { width: 360px; height: 360px; position:relative; display:grid; grid-template-columns: repeat(3,1fr); grid-template-rows: repeat(3,1fr); gap:2px; }
    .tile {
      background-size: 360px 360px; /* ajusta si cambias el tama√±o */
      background-position: 0 0;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease;
    }
    .tile.blank { background: none; cursor: default; }

    /* Carta */
    .card-img { width: 420px; height: 280px; background-size: cover; background-position:center; border-radius:12px; position:relative; display:flex; align-items:center; justify-content:center; }
    .card-text {
      width:80%;
      height:60%;
      background: rgba(255,255,255,0.7);
      color: var(--text-color);
      padding:16px;
      border-radius:8px;
      text-align:left;
      overflow:auto;
    }
    .card-edit { display:flex; gap:8px; margin-top:8px; }

    /* Trivia */
    .trivia-wrap { display:flex; flex-direction:column; align-items:center; gap:12px; width:100%; }
    .question-box { background:white; padding:18px; border-radius:10px; width:80%; max-width:700px; color:var(--text-color); box-shadow:0 6px 18px rgba(0,0,0,0.06);}
    .options { display:grid; gap:10px; margin-top:8px; }
    .opt-btn {
      background: #fff;
      border:2px solid rgba(0,0,0,0.06);
      padding:12px;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
    }
    .opt-btn.correct { border-color: #4caf50; background:#eaf8ee; }
    .opt-btn.wrong { border-color: #ff4d4d; background:#ffecea; }

    /* mensaje solucion puzzle */
    #puzzle-msg { margin-top:8px; font-weight:700; color:var(--text-color); }

    /* responsive */
    @media (max-width:600px){
      .count-grid { grid-template-columns: repeat(2,1fr); }
      .puzzle { width: 300px; height:300px; background-size: 300px 300px; }
    }
  </style>
</head>
<body>

  <!-- ===========================
       NAV (botones) --> 
  <nav>
    <button class="tab-btn" onclick="showTab('music')">üé∂ M√∫sica</button>
    <button class="tab-btn" onclick="showTab('counter')">üìÖ Contador</button>
    <button class="tab-btn" onclick="showTab('collage')">üñºÔ∏è Collage</button>
    <button class="tab-btn" onclick="showTab('letter')">üíå Carta</button>
    <button class="tab-btn" onclick="showTab('trivia')">üéÆ Jueguito</button>
  </nav>

  <!-- contenedor central -->
  <div class="panel">
    <!-- MUSIC -->
    <section id="music" class="active center-column">
      <div style="max-width:820px;">
        <h2 style="margin:0 0 6px 0;">Nuestra canci√≥n ‚ù§</h2>
        <p style="margin:0 0 12px 0; font-weight:600;">Dale clic para escuchar:</p>
        <!-- CAMBIA EL LINK EN LA VARIABLE YOUTUBE_LINK DEL SCRIPT -->
        <a id="youtube-link" href="#" target="_blank" style="padding:10px 16px; background:#fff; color:var(--text-color); border-radius:10px; font-weight:700; text-decoration:none;">Haz clic aqu√≠</a>
      </div>
    </section>

    <!-- COUNTER -->
    <section id="counter" class="center-column">
      <div style="width:100%;">
        <h2 style="margin:0 0 6px 0;">Nuestro tiempo juntos ‚ù§</h2>
        <div class="count-grid" id="count-grid">
          <div class="count-box"><div class="count-value" id="months">0</div><div class="count-label">Meses</div></div>
          <div class="count-box"><div class="count-value" id="days">0</div><div class="count-label">D√≠as</div></div>
          <div class="count-box"><div class="count-value" id="hours">0</div><div class="count-label">Horas</div></div>
          <div class="count-box"><div class="count-value" id="minutes">0</div><div class="count-label">Minutos</div></div>
          <div class="count-box"><div class="count-value" id="seconds">0</div><div class="count-label">Segundos</div></div>
        </div>
      </div>
    </section>

    <!-- COLLAGE / PUZZLE -->
    <section id="collage" class="center-column">
      <div class="puzzle-wrap">
        <h2 style="margin:0;">Rompecabezas ‚ù§</h2>
        <p style="margin:0 0 8px 0;">Se formar√° una foto (la que subas como PUZZLE_IMAGE). Cuando termine, abajo aparece tu mensaje.</p>
        <div class="puzzle" id="puzzle"></div>

        <div style="display:flex; gap:10px; margin-top:10px;">
          <button onclick="shufflePuzzle()" class="tab-btn" style="background:#fff;">Mezclar</button>
          <button onclick="resetPuzzle()" class="tab-btn" style="background:#fff;">Reiniciar</button>
        </div>

        <div id="puzzle-msg" contenteditable="false" style="margin-top:12px;"></div>

        <div style="margin-top:8px; font-size:0.9rem; opacity:0.8;">
          Para editar el mensaje que aparece al completar el rompecabezas, edita la variable <code>PUZZLE_SOLVED_MESSAGE</code> en el script (o usa el bot√≥n "Editar mensaje"). 
        </div>
        <div style="margin-top:8px;">
          <button class="tab-btn" onclick="enablePuzzleMessageEdit()">Editar mensaje</button>
        </div>
      </div>
    </section>

    <!-- LETTER -->
    <section id="letter" class="center-column">
      <div>
        <h2 style="margin:0 0 8px 0;">Carta ‚ù§</h2>
        <div class="card-img" id="card-img" style="background-image: url('card-blank.jpg');">
          <!-- caja editable dentro de la imagen -->
          <div class="card-text" id="cardText" contenteditable="true" spellcheck="false" style="background: rgba(255,255,255,0.85);">
            Escribe aqu√≠ tu carta (haz clic y edita). Cuando termines puedes copiar este texto y pegarlo en el repositorio o mantenerlo aqu√≠ (siempre que la p√°gina no se recargue perder√°s lo no guardado).
          </div>
        </div>
        <div class="card-edit">
          <button class="tab-btn" onclick="downloadCardText()">Guardar texto (descargar)</button>
          <button class="tab-btn" onclick="resetCardText()">Restablecer</button>
        </div>
      </div>
    </section>

    <!-- TRIVIA -->
    <section id="trivia" class="center-column">
      <div style="width:100%; display:flex; flex-direction:column; align-items:center;">
        <h2 style="margin:0 0 10px 0;">Trivia ‚ù§</h2>
        <div class="trivia-wrap">
          <div class="question-box">
            <div id="questionText" style="font-size:1.12rem; font-weight:800;">Pregunta</div>
            <div class="options" id="options"></div>
          </div>

          <div style="display:flex; gap:12px; margin-top:12px;">
            <button class="tab-btn" onclick="nextQuestion()">Siguiente pregunta</button>
            <button class="tab-btn" onclick="restartTrivia()">Reiniciar</button>
          </div>

          <div id="score" style="margin-top:10px; font-weight:700;"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- ============ SCRIPT: configuraci√≥n y l√≥gica ============ -->
  <script>
    /* ==========================
       ===  CONFIGURA AQUI   ===
       ==========================
    */

    // 2) Link de YouTube
    const YOUTUBE_LINK = 'https://youtu.be/PQlG1gznMBE?si=UX4M2A5xi-gAeiQ1'; // <-- reemplaza con tu link

    // 3) Fecha de inicio (aniversario)
    const START_DATE = '2025-03-30T00:00:00'; // <-- ya configurado para 30-mar-2025

    // 4) Rompecabezas: imagen usada y configuraci√≥n (3x3)
    const PUZZLE_IMAGE = 'https://github.com/nattcjj/JUEGO_POLLO/blob/main/puzzle-photo.jpg?raw=true'; // <-- SUBE tu foto para el rompecabezas y pon su nombre aqu√≠
    const PUZZLE_COLS = 3;
    const PUZZLE_ROWS = 3;
    const TILE_SIZE = 360; // p√≠xeles; ajusta CSS tambi√©n si cambiaslo

    // 5) Mensaje que aparecer√° cuando se resuelva el puzzle (puedes editar aqu√≠)
    let PUZZLE_SOLVED_MESSAGE = "¬°Felicidades! Puedes escribir tu mensaje final aqu√≠ ‚ù§";

    // 6) Carta: imagen de la "hoja" que usar√°s
    const CARD_IMAGE = 'card-blank.jpg'; // <-- SUBE tu imagen de carta / hoja en blanco

    // 7) Trivia: preguntas (ed√≠talas aqu√≠, cada 'correct' es √≠ndice 0..3)
    const TRIVIA_QUESTIONS = [
      { q: "¬øD√≥nde fue nuestra primer encuentro?", opts: ["En mi U", "En el portal 80", "En un caf√©", "En el coplaza"], correct: 2 },
      { q: "¬øCuando fue nuestro primer beso?", opts: ["13 de mayo", "20 de mayo", "18 de mayo", "3 de junio"], correct: 1 },
      { q: "¬øQu√© es lo que m√°s me gusta de t√≠?", opts: ["Tu boca", "Tus ojos", "Tus manos", "Tu olor"], correct: 2 },
      { q: "¬øQu√© nos  gusta comer?", opts: ["Sushi", "Lasagna", "Hamburguesa", "Salchipapa"], correct: 4 }
    ];
    /* ==========================
       ===  FIN CONFIGURACI√ìN ===
       ========================== */

    // set background image
    document.body.style.backgroundImage = `url('${BACKGROUND_IMAGE}')`;

    // set youtube link
    document.getElementById('youtube-link').href = YOUTUBE_LINK;

    /* ============== pesta√±as ============== */
    function showTab(id){
      document.querySelectorAll('section').forEach(s=> s.classList.remove('active'));
      const sec = document.getElementById(id);
      if(sec) sec.classList.add('active');
      // centrar la vista: scrollea al centro del panel
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* ============== contador detallado ============== */
    const start = n
